
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Context Suggester
        | Elasticsearch Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="search-suggesters.html" title="Suggesters" /><link rel="prev" href="search-suggesters-completion.html" title="Completion Suggester" /><link rel="next" href="search-multi-search.html" title="Multi Search API" /><meta name="DC.type" content="Docs/Elasticsearch/Reference/master" />
  
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

 	<!-- RTP tag -->
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");

	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->

	
 	<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
<meta name="apple-mobile-web-app-title" content="Elastic">
<meta name="application-name" content="Elastic">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >


<!-- end DC tags -->

	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/elastic-logo-200.png" />
	

		


	
	<link type="text/css" rel="stylesheet" href="https://stag-static-www.elastic.co/static/css/skel.css?q=500" />
	<link type="text/css" rel="stylesheet" href="https://stag-static-www.elastic.co/static/css/style.css?q=500" />
	<script src="https://stag-static-www.elastic.co/static/js/skel.min.js?q=500"></script>
	
		<script type="text/javascript">form_name = "" ; cdn_url="https://stag-static-www.elastic.co";cdn_slug = "500"</script>
	
	<script src="https://stag-static-www.elastic.co/static/js/init.js?q=500"></script>
	<script src="https://stag-static-www.elastic.co/static/js/jquery.min.js?q=500"></script>
	<script src="https://stag-static-www.elastic.co/static/js/jquery.cookie.js?q=500"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->
	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />
	<script type="text/javascript" src="/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	<!-- begin olark code -->
	<script data-cfasync="false" type='text/javascript'>/*<![CDATA[*/window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){
	f[z]=function(){
	(a.s=a.s||[]).push(arguments)};var a=f[z]._={
	},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){
	f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={
	0:+new Date};a.P=function(u){
	a.p[u]=new Date-a.p[0]};function s(){
	a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){
	hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){
	return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){
	b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{
	b.contentWindow[g].open()}catch(w){
	c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{
	var t=b.contentWindow[g];t.write(p());t.close()}catch(x){
	b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({
	loader: "static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
	/* custom configuration goes here (www.olark.com/documentation) */
	olark.identify('1356-750-10-5709');/*]]>*/</script><noscript><a href="https://www.olark.com/site/1356-750-10-5709/contact" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="http://www.olark.com?welcome" title="Olark live chat software">Olark live chat software</a></noscript>
	<!-- end olark code -->


	<div class="header-cont">
		<div id="header-wrapper">
			


	<script src="/static/js/jquery.tokeninput.js?change=123"></script>
	<link rel="stylesheet" type="text/css" href="/static/css/token-input.css">

<div class="shortcuts-wrapper">
	<div class="container">
		<!-- Shortcuts -->
		<nav id="shortcuts">
			<ul class="links">
				
					
					
						
						
					
					
					
						
					
					
					<li class="shortcut-1">
					

					
						<a href="/downloads" id="header_downloads">
							<span class="txt">downloads</span>
						</a>
					
					</li>
				
					
					
						
						
					
					
					
						
					
					
					<li class="shortcut-2">
					

					
						<a href="/guide" id="header_guide">
							<span class="txt">docs</span>
						</a>
					
					</li>
				
					
					
						
						
					
					
					
						
					
					
					<li class="shortcut-3">
					

					
						<a href="/subscriptions" id="header_subscriptions">
							<span class="txt">support</span>
						</a>
					
					</li>
				
					
					
						
						
					
					
					
						
					
					
					<li class="shortcut-4">
					

					
						<a href="https://discuss.elastic.co" id="header_forums" target="_blank">
							<span class="txt">forums</span>
						</a>
					
					</li>
				
					
					
						
						
					
					
					
						
						
					
					
					<li class="shortcut-5">
					

					
						<a href="/contact?storm=global-header-en" id="header_contact">
							<span class="txt">contact</span>
						</a>
					
					</li>
				
			</ul>
		</nav>
		<div class="languages-wrapper">
			<div class="global-language">
				<ul class="language">
					
						<li><a href="#">EN</a></li>
					
				</ul>
				<ul class="all-languages">
					
						
							
						
						<li><a href="/">English</a></li>
					
						
							
						
						<li><a href="/fr/">French</a></li>
					
						
							
						
						<li><a href="/de/">German</a></li>
					
						
							
						
						<li><a href="/jp/">Japanese</a></li>
					
						
							
						
						<li><a href="/kr/">Korean</a></li>
					
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="container w100">
	<div class="row 0%">
		<div class="12u">
			

<section class="first-container desktop-main-nav">
	<div class="row 0%">
		<div class="11u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="-155 383.3 687.5 235.7" xml:space="preserve" enable-background="new -155 383.3 687.5 235.7"><path fill="#FFFFFF" d="M81.6 506.8c0-19.8-12.3-37.2-30.8-43.9 0.8-4.2 1.2-8.4 1.2-12.7 0-36.9-30-66.9-66.8-66.9 -21.6 0-41.6 10.3-54.2 27.7 -6.2-4.8-13.8-7.4-21.7-7.4 -19.6 0-35.5 15.9-35.5 35.5 0 4.3 0.8 8.5 2.2 12.4 -18.4 6.6-31 24.3-31 44 0 19.9 12.4 37.3 30.9 44 -0.8 4.1-1.2 8.4-1.2 12.7 0 36.8 29.9 66.7 66.7 66.7 21.6 0 41.6-10.4 54.1-27.8 6.2 4.9 13.8 7.6 21.7 7.6 19.6 0 35.5-15.9 35.5-35.5 0-4.3-0.8-8.5-2.2-12.4C68.9 544.2 81.6 526.5 81.6 506.8"/><path fill="#FED10A" d="M-62 484.8l51.8 23.6L42 462.6c0.8-3.8 1.1-7.5 1.1-11.5 0-32.2-26.2-58.4-58.4-58.4 -19.3 0-37.2 9.5-48.1 25.4l-8.7 45.1L-62 484.8z"/><path fill="#24BBB1" d="M-115.6 539.6c-0.8 3.8-1.1 7.7-1.1 11.7 0 32.3 26.3 58.5 58.6 58.5 19.4 0 37.5-9.6 48.4-25.6l8.6-44.9 -11.5-22 -52-23.7L-115.6 539.6z"/><path fill="#EF5098" d="M-115.9 450l35.5 8.4 7.8-40.3c-4.8-3.7-10.8-5.7-17-5.7 -15.4 0-28 12.5-28 28C-117.6 443.7-117 447-115.9 450"/><path fill="#17A8E0" d="M-119 458.5c-15.8 5.2-26.9 20.4-26.9 37.1 0 16.3 10.1 30.8 25.2 36.6l49.8-45 -9.1-19.5L-119 458.5z"/><path fill="#93C83E" d="M-0.7 584.2c4.9 3.7 10.8 5.8 16.9 5.8 15.4 0 28-12.5 28-28 0-3.4-0.6-6.7-1.7-9.7L7.1 544 -0.7 584.2z"/><path fill="#0779A1" d="M6.5 534.7l39 9.1c15.9-5.2 26.9-20.4 26.9-37.2 0-16.2-10.1-30.8-25.2-36.5l-51 44.7L6.5 534.7z"/><path d="M175.8 548.8l4.7-0.5 0.3 9.6c-12.4 1.7-23 2.6-31.8 2.6 -11.7 0-20-3.4-24.9-10.2s-7.3-17.4-7.3-31.7c0-28.6 11.4-42.9 34.1-42.9 11 0 19.2 3.1 24.6 9.2s8.1 15.8 8.1 28.9l-0.7 9.3h-53.8c0 9 1.6 15.7 4.9 20 3.3 4.3 8.9 6.5 17 6.5C159.2 549.8 167.4 549.5 175.8 548.8zM171.4 513.5c0-10-1.6-17.1-4.8-21.2 -3.2-4.1-8.4-6.2-15.6-6.2s-12.7 2.2-16.3 6.5c-3.6 4.3-5.5 11.3-5.6 20.9H171.4z"/><path d="M200.6 559V442h12.2v117H200.6z"/><path d="M289.9 502.1v40.1c0 4.1 10.1 4.9 10.1 4.9l-0.6 10.8c-8.6 0-15.7 0.7-20-3.4 -9.8 4.3-19.5 6.1-29.3 6.1 -7.5 0-13.2-2.1-17.1-6.4 -3.9-4.2-5.9-10.3-5.9-18.3 0-7.9 2-13.8 6-17.5 4-3.7 10.3-6.1 18.9-6.9l25.6-2.4v-7c0-5.5-1.2-9.5-3.6-11.9 -2.4-2.4-5.7-3.6-9.8-3.6h-32.1v-10.8h31.3c9.2 0 15.9 2.1 20.1 6.4C287.8 486.4 289.9 493.1 289.9 502.1zM239.7 535.3c0 10 4.1 15 12.4 15 7.4 0 14.7-1.2 21.8-3.7l3.7-1.3v-26.9l-24.1 2.3c-4.9 0.4-8.4 1.8-10.6 4.2C240.7 527.3 239.7 530.8 239.7 535.3z"/><path d="M337.6 486.7c-11.8 0-17.8 4.1-17.8 12.4 0 3.8 1.4 6.5 4.1 8.1s8.9 3.2 18.6 4.9c9.7 1.7 16.5 4 20.5 7.1 4 3 6 8.7 6 17.1 0 8.4-2.7 14.5-8.1 18.4 -5.4 3.9-13.2 5.9-23.6 5.9 -6.7 0-29.2-2.5-29.2-2.5l0.7-10.6c12.9 1.2 22.3 2.2 28.6 2.2 6.3 0 11.1-1 14.4-3s5-5.4 5-10.1 -1.4-7.9-4.2-9.6c-2.8-1.7-9-3.3-18.6-4.8s-16.4-3.7-20.4-6.7c-4-2.9-6-8.4-6-16.3 0-7.9 2.8-13.8 8.4-17.6 5.6-3.8 12.6-5.7 20.9-5.7 6.6 0 29.6 1.7 29.6 1.7v10.7C354.4 487.6 344.5 486.7 337.6 486.7z"/><path d="M428 488.1h-25.9v39c0 9.3 0.7 15.5 2 18.4 1.4 2.9 4.6 4.4 9.7 4.4l14.5-1 0.8 10.1c-7.3 1.2-12.8 1.8-16.6 1.8 -8.5 0-14.3-2.1-17.6-6.2s-4.9-12-4.9-23.6v-42.9h-11.6v-10.6H390v-25h12.1v24.9H428V488.1z"/><path d="M445 459v-14.1h12.2v14.2L445 459 445 459zM445 559v-81.5h12.2V559H445z"/><path d="M510.2 475.8c3.6 0 9.7 0.7 18.3 2l3.9 0.5 -0.5 9.9c-8.7-1-15.1-1.5-19.2-1.5 -9.2 0-15.5 2.2-18.8 6.6s-5 12.6-5 24.5c0 11.9 1.5 20.2 4.6 24.9 3.1 4.7 9.5 7 19.3 7l19.2-1.5 0.5 10.1c-10.1 1.5-17.7 2.3-22.7 2.3 -12.7 0-21.5-3.3-26.3-9.8s-7.3-17.5-7.3-33 2.6-26.4 7.8-32.6C489.3 479 498 475.8 510.2 475.8z"/></svg>
						</div>
					</a>
				</h1>
			</div>
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li>
									

									
										<a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a>
									
								</li>								
							
								<li>
									

									
										<a href="/cloud" id="nav_elasticsearch_as_a_service" >elasticsearch as a service</a>
									
								</li>								
							
								<li>
									

									
										<a href="/products/logstash" id="nav_logstash" >logstash</a>
									
								</li>								
							
								<li>
									

									
										<a href="/products/kibana" id="nav_kibana" >kibana</a>
									
								</li>								
							
								<li>
									

									
										<a href="/products/beats" id="nav_beats" >beats</a>
									
								</li>								
							
								<li>
									

									
										<a href="/products/watcher" id="nav_watcher" >watcher</a>
									
								</li>								
							
								<li>
									

									
										<a href="/products/shield" id="nav_shield" >shield</a>
									
								</li>								
							
								<li>
									

									
										<a href="/products/marvel" id="nav_marvel" >marvel</a>
									
								</li>								
							
								<li>
									

									
										<a href="/products/graph" id="nav_graph" >graph</a>
									
								</li>								
							
								<li>
									

									
										<a href="/products/hadoop" id="nav_hadoop" >hadoop</a>
									
								</li>								
							
								<li>
									

									
										<a href="/downloads" id="nav_downloads" >downloads</a>
									
								</li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/cloud" id="nav_cloud"   >Cloud</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li>
									

									
										<a href="/guide" id="nav_guide" >docs</a>
									
								</li>								
							
								<li>
									

									
										<a href="/videos" id="nav_videos" >videos</a>
									
								</li>								
							
								<li>
									

									
										<a href="/training" id="nav_training" >training</a>
									
								</li>								
							
								<li>
									

									
										<a href="/services" id="nav_services" >services</a>
									
								</li>								
							
								<li>
									

									
										<a href="/blog" id="nav_learn_blog" >blog</a>
									
								</li>								
							
								<li>
									

									
										<a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a>
									
								</li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li>
									

									
										<a href="/community/meetups" id="nav_meetups" >meetups</a>
									
								</li>								
							
								<li>
									

									
										<a href="https://discuss.elastic.co" id="nav_forums" target="_blank">forums</a>
									
								</li>								
							
								<li>
									

									
										<a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a>
									
								</li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
							
								<li>
									

									
										<a href="/blog/category/news" id="blog_news" >News</a>
									
								</li>								
							
								<li>
									

									
										<a href="/blog/category/engineering" id="blog_engineering" >Engineering</a>
									
								</li>								
							
								<li>
									

									
										<a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a>
									
								</li>								
							
								<li>
									

									
										<a href="/blog/category/releases" id="blog_releases" >Releases</a>
									
								</li>								
							
								<li>
									

									
										<a href="/blog/archive" id="blog_archive" >Archive</a>
									
								</li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li>
									

									
										<a href="/about/leadership" id="nav_leadership" >leadership</a>
									
								</li>								
							
								<li>
									

									
										<a href="/about/board" id="nav_board" >board of directors</a>
									
								</li>								
							
								<li>
									

									
										<a href="/about/careers" id="nav_careers" >careers</a>
									
								</li>								
							
								<li>
									

									
										<a href="/about/partners" id="nav_partners" >partners</a>
									
								</li>								
							
								<li>
									

									
										<a href="/about/press" id="nav_press" >press</a>
									
								</li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>			
		</div>
		<div class="1u 6u(small) 6u(xsmall)">
			<div id="searchbar">
				<a href="#" class="button icon"></a>
			</div>
		</div>
	</div>
</section>
<div class="mobile-menu-wrapper">
	<div class="row 0%">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="-155 383.3 687.5 235.7" xml:space="preserve" enable-background="new -155 383.3 687.5 235.7"><path fill="#FFFFFF" d="M81.6 506.8c0-19.8-12.3-37.2-30.8-43.9 0.8-4.2 1.2-8.4 1.2-12.7 0-36.9-30-66.9-66.8-66.9 -21.6 0-41.6 10.3-54.2 27.7 -6.2-4.8-13.8-7.4-21.7-7.4 -19.6 0-35.5 15.9-35.5 35.5 0 4.3 0.8 8.5 2.2 12.4 -18.4 6.6-31 24.3-31 44 0 19.9 12.4 37.3 30.9 44 -0.8 4.1-1.2 8.4-1.2 12.7 0 36.8 29.9 66.7 66.7 66.7 21.6 0 41.6-10.4 54.1-27.8 6.2 4.9 13.8 7.6 21.7 7.6 19.6 0 35.5-15.9 35.5-35.5 0-4.3-0.8-8.5-2.2-12.4C68.9 544.2 81.6 526.5 81.6 506.8"/><path fill="#FED10A" d="M-62 484.8l51.8 23.6L42 462.6c0.8-3.8 1.1-7.5 1.1-11.5 0-32.2-26.2-58.4-58.4-58.4 -19.3 0-37.2 9.5-48.1 25.4l-8.7 45.1L-62 484.8z"/><path fill="#24BBB1" d="M-115.6 539.6c-0.8 3.8-1.1 7.7-1.1 11.7 0 32.3 26.3 58.5 58.6 58.5 19.4 0 37.5-9.6 48.4-25.6l8.6-44.9 -11.5-22 -52-23.7L-115.6 539.6z"/><path fill="#EF5098" d="M-115.9 450l35.5 8.4 7.8-40.3c-4.8-3.7-10.8-5.7-17-5.7 -15.4 0-28 12.5-28 28C-117.6 443.7-117 447-115.9 450"/><path fill="#17A8E0" d="M-119 458.5c-15.8 5.2-26.9 20.4-26.9 37.1 0 16.3 10.1 30.8 25.2 36.6l49.8-45 -9.1-19.5L-119 458.5z"/><path fill="#93C83E" d="M-0.7 584.2c4.9 3.7 10.8 5.8 16.9 5.8 15.4 0 28-12.5 28-28 0-3.4-0.6-6.7-1.7-9.7L7.1 544 -0.7 584.2z"/><path fill="#0779A1" d="M6.5 534.7l39 9.1c15.9-5.2 26.9-20.4 26.9-37.2 0-16.2-10.1-30.8-25.2-36.5l-51 44.7L6.5 534.7z"/><path d="M175.8 548.8l4.7-0.5 0.3 9.6c-12.4 1.7-23 2.6-31.8 2.6 -11.7 0-20-3.4-24.9-10.2s-7.3-17.4-7.3-31.7c0-28.6 11.4-42.9 34.1-42.9 11 0 19.2 3.1 24.6 9.2s8.1 15.8 8.1 28.9l-0.7 9.3h-53.8c0 9 1.6 15.7 4.9 20 3.3 4.3 8.9 6.5 17 6.5C159.2 549.8 167.4 549.5 175.8 548.8zM171.4 513.5c0-10-1.6-17.1-4.8-21.2 -3.2-4.1-8.4-6.2-15.6-6.2s-12.7 2.2-16.3 6.5c-3.6 4.3-5.5 11.3-5.6 20.9H171.4z"/><path d="M200.6 559V442h12.2v117H200.6z"/><path d="M289.9 502.1v40.1c0 4.1 10.1 4.9 10.1 4.9l-0.6 10.8c-8.6 0-15.7 0.7-20-3.4 -9.8 4.3-19.5 6.1-29.3 6.1 -7.5 0-13.2-2.1-17.1-6.4 -3.9-4.2-5.9-10.3-5.9-18.3 0-7.9 2-13.8 6-17.5 4-3.7 10.3-6.1 18.9-6.9l25.6-2.4v-7c0-5.5-1.2-9.5-3.6-11.9 -2.4-2.4-5.7-3.6-9.8-3.6h-32.1v-10.8h31.3c9.2 0 15.9 2.1 20.1 6.4C287.8 486.4 289.9 493.1 289.9 502.1zM239.7 535.3c0 10 4.1 15 12.4 15 7.4 0 14.7-1.2 21.8-3.7l3.7-1.3v-26.9l-24.1 2.3c-4.9 0.4-8.4 1.8-10.6 4.2C240.7 527.3 239.7 530.8 239.7 535.3z"/><path d="M337.6 486.7c-11.8 0-17.8 4.1-17.8 12.4 0 3.8 1.4 6.5 4.1 8.1s8.9 3.2 18.6 4.9c9.7 1.7 16.5 4 20.5 7.1 4 3 6 8.7 6 17.1 0 8.4-2.7 14.5-8.1 18.4 -5.4 3.9-13.2 5.9-23.6 5.9 -6.7 0-29.2-2.5-29.2-2.5l0.7-10.6c12.9 1.2 22.3 2.2 28.6 2.2 6.3 0 11.1-1 14.4-3s5-5.4 5-10.1 -1.4-7.9-4.2-9.6c-2.8-1.7-9-3.3-18.6-4.8s-16.4-3.7-20.4-6.7c-4-2.9-6-8.4-6-16.3 0-7.9 2.8-13.8 8.4-17.6 5.6-3.8 12.6-5.7 20.9-5.7 6.6 0 29.6 1.7 29.6 1.7v10.7C354.4 487.6 344.5 486.7 337.6 486.7z"/><path d="M428 488.1h-25.9v39c0 9.3 0.7 15.5 2 18.4 1.4 2.9 4.6 4.4 9.7 4.4l14.5-1 0.8 10.1c-7.3 1.2-12.8 1.8-16.6 1.8 -8.5 0-14.3-2.1-17.6-6.2s-4.9-12-4.9-23.6v-42.9h-11.6v-10.6H390v-25h12.1v24.9H428V488.1z"/><path d="M445 459v-14.1h12.2v14.2L445 459 445 459zM445 559v-81.5h12.2V559H445z"/><path d="M510.2 475.8c3.6 0 9.7 0.7 18.3 2l3.9 0.5 -0.5 9.9c-8.7-1-15.1-1.5-19.2-1.5 -9.2 0-15.5 2.2-18.8 6.6s-5 12.6-5 24.5c0 11.9 1.5 20.2 4.6 24.9 3.1 4.7 9.5 7 19.3 7l19.2-1.5 0.5 10.1c-10.1 1.5-17.7 2.3-22.7 2.3 -12.7 0-21.5-3.3-26.3-9.8s-7.3-17.5-7.3-33 2.6-26.4 7.8-32.6C489.3 479 498 475.8 510.2 475.8z"/></svg>
						</div>
					</a>
				</h1>
			</div>
		</div>
		<div class="4u 6u(small) 6u(xsmall) text-right">
			<!-- <div class="mobile-menu-wrapper"> -->
				<ul class="m-shortcuts">
					
						

						
							<li><a href="#" class="m-search" id="header-search"></a></li>
						
					
						

						
							<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
						
					
						

						
							<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
						
					
				</ul>	
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>
								
								<ul>
									
									
									
									
										<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									
									
									
									
									
										<li><a href="/cloud" id="nav_elasticsearch_as_a_service" >elasticsearch as a service</a></li>
									
									
									
									
									
									
										<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									
									
									
									
									
										<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									
									
									
									
									
										<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									
									
									
									
									
										<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									
									
									
									
									
										<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									
									
									
									
									
										<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									
									
									
									
									
										<li><a href="/products/graph" id="nav_graph" >graph</a></li>
									
									
									
									
									
									
										<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									
									
									
									
									
										<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
									
									
								</ul>
								
							
								<h3><a href="/cloud" id="nav_cloud" >Cloud</a></h3>
								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>
								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>
								
								<ul>
									
									
									
									
										<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									
									
									
									
									
										<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									
									
									
									
									
										<li><a href="/training" id="nav_training" >training</a></li>
									
									
									
									
									
									
										<li><a href="/services" id="nav_services" >services</a></li>
									
									
									
									
									
									
										<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									
									
									
									
									
										<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
									
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>
								
								<ul>
									
									
									
									
										<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									
									
									
									
									
										<li><a href="https://discuss.elastic.co" id="nav_forums" target="_blank">forums</a></li>
									
									
									
									
									
									
										<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>
									
									
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>
								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>
								
								<ul>
									
									
									
									
										<li><a href="/blog/category/news" id="blog_news" >News</a></li>
									
									
									
									
									
									
										<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>
									
									
									
									
									
									
										<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>
									
									
									
									
									
									
										<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>
									
									
									
									
									
									
										<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>
									
									
									
								</ul>
								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>
								
								<ul>
									
									
									
									
										<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									
									
									
									
									
										<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									
									
									
									
									
										<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									
									
									
									
									
										<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									
									
									
									
									
										<li><a href="/about/press" id="nav_press" >press</a></li>
									
									
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			<!-- </div> -->
		</div>
	</div>
</div>
<!-- Mobile Menu -->


		</div>
	</div>
</div>
<div class="header-search-wrapper">	
	<div class="container">
		<div class="big-search">
			<i class="big-search-icon"></i>
			<form method="get" action="/search" autocomplete="on" name="searchForm" id="searchfrm">
				<ul class="tags-wrapper">
					<li class="search-field"><input type="text" class="form-control global-input" id="autocomplete" name="q"></li>
				</ul>
			</form>
			<a href="#" class="header-search-cancel"></a>
		</div>
		<div class="nav-auto-complete"></div>
	</div>
</div>
<style>	
	
	
		.m-shortcuts li a.m-search {
			background: url("https://stag-static-www.elastic.co/assets/blt174b13be89ff803c/m-search-icon.png?q=500") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("https://stag-static-www.elastic.co/assets/blt5ba03f594a7d610a/m-guide-icon.png?q=500") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("https://stag-static-www.elastic.co/assets/blt38c3e853c4b1174d/m-contact-icon.png?q=500") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
	  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="page_header"><b>PLEASE NOTE:</b>
<br/>
This page is for an as yet unreleased version of the software. Check out the <a href="../current/index.html">latest
version&#39;s documentation here</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="search.html">Search APIs </a></span> » <span class="breadcrumb-link"><a href="search-suggesters.html">Suggesters</a></span> » <span class="breadcrumb-node">Context Suggester</span></div><div class="navheader"><span class="prev"><a href="search-suggesters-completion.html">
              « 
              Completion Suggester</a>
           
        </span><span class="next">
           
          <a href="search-multi-search.html">Multi Search API
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="suggester-context"></a>Context Suggester<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The completion suggester considers all documents in the index, but it is often
desirable to serve suggestions filtered and/or boosted by some criteria.
For example, you want to suggest song titles filtered by certain artists or
you want to boost song titles based on their genre.</p><p>To achieve suggestion filtering and/or boosting, you can add context mappings while
configuring a completion field. You can define multiple context mappings for a
completion field.
Every context mapping has a unique name and a type. There are two types: <code class="literal">category</code>
and <code class="literal">geo</code>. Context mappings are configured under the <code class="literal">contexts</code> parameter in
the field mapping.</p><p>The following defines two context mappings for a completion field:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT place/shops/_mapping
{
  "shops" : {
        "properties" : {
            ...
            "suggest" : {
                "type" : "completion",
                "contexts": [
                    { <a id="CO30-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
                        "name": "place_type",
                        "type": "category",
                        "path": "cat"
                    },
                    { <a id="CO30-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
                        "name": "location"
                        "type": "geo",
                        "path": "loc"
                    }
                ]
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Defines a <code class="literal">category</code> context named <span class="emphasis"><em>place_type</em></span>, which will index values from field <span class="emphasis"><em>cat</em></span>.
    See <a class="xref" href="suggester-context.html#suggester-context-category" title="Category Contextedit">the section called “Category Context<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a>”</a>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Defines a <code class="literal">geo</code> context named <span class="emphasis"><em>location</em></span>, which will index values from field <span class="emphasis"><em>loc</em></span>.
    See <a class="xref" href="suggester-context.html#suggester-context-geo" title="Geo location Contextedit">the section called “Geo location Context<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a>”</a>
</p></td></tr></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Adding context mappings increases the index size for completion field. The completion index
is entirely heap resident, you can monitor the completion field index size using <a class="xref" href="indices-stats.html" title="Indices Stats"><em>Indices Stats</em></a>.</p></div></div><h4><a id="suggester-context-category"></a>Category Context<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">category</code> context allows you to associate one or more categories with suggestions at index
time. At query time, suggestions can be filtered and boosted by their associated categories.</p><h5><a id="_category_mapping"></a>Category Mapping<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>A <code class="literal">category</code> context mapping, where categories are provided explicitly with suggestions
can be defined as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"contexts": [
    {
        "name": "cat_context",
        "type": "category",
    }
]</pre></div><p>Alternatively, A <code class="literal">category</code> context mapping that references another field within a document
can be defined as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"contexts": [
    {
        "name": "cat_context",
        "type": "category",
        "path": "cat_field"
    }
]</pre></div><h5><a id="_indexing_category_contexts"></a>Indexing category contexts<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Category contexts can be specified explicitly when indexing suggestions. If a suggestion has
multiple categories, the suggestion will be indexed for each category:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT place/shops/1
{
    ...
    "suggest": {
        "input": ["timmy's", "starbucks", "dunkin donuts"],
        "contexts": {
            "place_type": ["cafe", "food"] <a id="CO31-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO31-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
These suggestions will be associated with <span class="emphasis"><em>cafe</em></span> and <span class="emphasis"><em>food</em></span> category.
</p></td></tr></table></div><p>Category contexts can also be referenced from another indexed field in the document via
the <code class="literal">path</code> parameter in the field mapping:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"contexts": [
    {
        "name": "cat_context",
        "type": "category",
        "path": "cat"
    }
]</pre></div><p>With the above mapping, the following will index the suggestions, treating the values of the
<span class="emphasis"><em>cat</em></span> field as category contexts:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT place/shops/1
{
    ...
    "suggest": ["timmy's", "starbucks", "dunkin donuts"],
    "cat": ["cafe", "food"] <a id="CO32-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO32-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
These suggestions will be associated with <span class="emphasis"><em>cafe</em></span> and <span class="emphasis"><em>food</em></span> category.
</p></td></tr></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>If context mapping references another field and the categories
are explicitly indexed, the suggestions are indexed with both set
of categories.</p></div></div><h5><a id="_category_query"></a>Category Query<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Suggestions can be filtered by one or more categories. The following
filters suggestions by multiple categories:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST place/_suggest?pretty
{
    "suggest" : {
        "prefix" : "tim",
        "completion" : {
            "field" : "suggest",
            "size": 10,
            "contexts": {
                "place_type": [ "cafe", "restaurants" ]
            }
        }
    }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>When no categories are provided at query-time, all indexed documents are considered.
Querying with no categories on a category enabled completion field should be avoided, as it
will degrade search performance.</p></div></div><p>Suggestions with certain categories can be boosted higher than others.
The following filters suggestions by categories and additionally boosts
suggestions associated with some categories:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST place/_suggest?pretty
{
    "suggest" : {
        "prefix" : "tim",
        "completion" : {
            "field" : "suggest",
            "size": 10,
            "contexts": {
                "place_type": [ <a id="CO33-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
                    { "context" : "cafe" },
                    { "context" : "restaurants", "boost": 2 }
                 ]
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO33-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The context query filter suggestions associated with
    categories <span class="emphasis"><em>cafe</em></span> and <span class="emphasis"><em>restaurants</em></span> and boosts the
    suggestions associated with <span class="emphasis"><em>restaurants</em></span> by a
    factor of <code class="literal">2</code>
</p></td></tr></table></div><p>In addition to accepting category values, a context query can be composed of
multiple category context clauses. The following parameters are supported for a
<code class="literal">category</code> context clause:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">context</code>
</p>
</td><td valign="top">
<p>
    The value of the category to filter/boost on.
    This is mandatory.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">boost</code>
</p>
</td><td valign="top">
<p>
    The factor by which the score of the suggestion
    should be boosted, the score is computed by
    multiplying the boost with the suggestion weight,
    defaults to <code class="literal">1</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">prefix</code>
</p>
</td><td valign="top">
<p>
    Whether the category value should be treated as a
    prefix or not. For example, if set to <code class="literal">true</code>,
    you can filter category of <span class="emphasis"><em>type1</em></span>, <span class="emphasis"><em>type2</em></span> and
    so on, by specifying a category prefix of <span class="emphasis"><em>type</em></span>.
    Defaults to <code class="literal">false</code>
</p>
</td></tr></tbody></table></div><h4><a id="suggester-context-geo"></a>Geo location Context<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A <code class="literal">geo</code> context allows you to associate one or more geo points or geohashes with suggestions
at index time. At query time, suggestions can be filtered and boosted if they are within
a certain distance of a specified geo location.</p><p>Internally, geo points are encoded as geohashes with the specified precision.
See <a class="xref" href="geohash.html" title="geohash"><code class="literal">geohash</code></a> for more background details.</p><h5><a id="_geo_mapping"></a>Geo Mapping<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>In addition to the <code class="literal">path</code> setting, <code class="literal">geo</code> context mapping accepts the following settings:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">precision</code>
</p>
</td><td valign="top">
<p>
    This defines the precision of the geohash to be indexed and can be specified
    as a distance value (<code class="literal">5m</code>, <code class="literal">10km</code> etc.), or as a raw geohash precision (<code class="literal">1</code>..<code class="literal">12</code>).
    Defaults to a raw geohash precision value of <code class="literal">6</code>.
</p>
</td></tr></tbody></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The index time <code class="literal">precision</code> setting sets the maximum geohash precision that
can be used at query time.</p></div></div><p>The following defines a <code class="literal">geo</code> context mapping with an index time precision of <code class="literal">4</code>
indexing values from a geo point field <span class="emphasis"><em>pin</em></span>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"contexts": [
    {
        "name": "location"
        "type": "geo",
        "precision": 4,
        "path": "pin",
    }
]</pre></div><h5><a id="_indexing_geo_contexts"></a>Indexing geo contexts<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p><code class="literal">geo</code> contexts can be explicitly set with suggestions or be indexed from a geo point field in the
document via the <code class="literal">path</code> parameter, similar to <code class="literal">category</code> contexts. Associating multiple geo location context
with a suggestion, will index the suggestion for every geo location. The following indexes a suggestion
with two geo location contexts:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT place/shops/1
{
    "suggest": {
        "input": "timmy's",
        "contexts": [
            "location": [
                {
                    "lat": 43.6624803,
                    "lon": -79.3863353
                },
                {
                    "lat": 43.6624718,
                    "lon": -79.3873227
                }
            ]
        ]
    }
}</pre></div><h5><a id="_geo_location_query"></a>Geo location Query<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/suggesters/context-suggest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Suggestions can be filtered and boosted with respect to how close they are to one or
more geo points. The following filters suggestions that fall within the area represented by
the encoded geohash of a geo point:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST place/_suggest
{
    "suggest" : {
        "prefix" : "tim",
        "completion" : {
            "field" : "suggest",
            "size": 10,
            "contexts": {
                "location": {
                    "lat": 43.662,
                    "lon": -79.380
                }
            }
        }
    }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>When a location with a lower precision at query time is specified, all suggestions
that fall within the area will be considered.</p></div></div><p>Suggestions that are within an area represented by a geohash can also be boosted higher
than others, as shown by the following:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST place/_suggest?pretty
{
    "suggest" : {
        "prefix" : "tim",
        "completion" : {
            "field" : "suggest",
            "size": 10,
            "contexts": {
                "location": [ <a id="CO34-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
                    {
                        "lat": 43.6624803,
                        "lon": -79.3863353,
                        "precision": 2
                    },
                    {
                        "context": {
                            "lat": 43.6624803,
                            "lon": -79.3863353
                        },
                        "boost": 2
                    }
                 ]
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO34-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The context query filters for suggestions that fall under
    the geo location represented by a geohash of <span class="emphasis"><em>(43.662, -79.380)</em></span>
    with a precision of <span class="emphasis"><em>2</em></span> and boosts suggestions
    that fall under the geohash representation of <span class="emphasis"><em>(43.6624803, -79.3863353)</em></span>
    with a default precision of <span class="emphasis"><em>6</em></span> by a factor of <code class="literal">2</code>
</p></td></tr></table></div><p>In addition to accepting context values, a context query can be composed of
multiple context clauses. The following parameters are supported for a
<code class="literal">category</code> context clause:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">context</code>
</p>
</td><td valign="top">
<p>
    A geo point object or a geo hash string to filter or
    boost the suggestion by. This is mandatory.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">boost</code>
</p>
</td><td valign="top">
<p>
    The factor by which the score of the suggestion
    should be boosted, the score is computed by
    multiplying the boost with the suggestion weight,
    defaults to <code class="literal">1</code>
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">precision</code>
</p>
</td><td valign="top">
<p>
    The precision of the geohash to encode the query geo point.
    This can be specified as a distance value (<code class="literal">5m</code>, <code class="literal">10km</code> etc.),
    or as a raw geohash precision (<code class="literal">1</code>..<code class="literal">12</code>).
    Defaults to index time precision level.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">neighbours</code>
</p>
</td><td valign="top">
<p>
    Accepts an array of precision values at which
    neighbouring geohashes should be taken into account.
    precision value can be a distance value (<code class="literal">5m</code>, <code class="literal">10km</code> etc.)
    or a raw geohash precision (<code class="literal">1</code>..<code class="literal">12</code>). Defaults to
    generating neighbours for index time precision level.
</p>
</td></tr></tbody></table></div></div><div class="navfooter"><span class="prev"><a href="search-suggesters-completion.html">
              « 
              Completion Suggester</a>
           
        </span><span class="next">
           
          <a href="search-multi-search.html">Multi Search API
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="https://www.elastic.co/webinars/elasticsearch-2-0-overview?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	



<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to our newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container sb-form"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2016. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
<li><a href="/brand" id="footer_brand">Brand</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div>
<!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>
		</section>
	</div>

	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>

<style type="text/css">
	
		.facebook{background:url("https://stag-static-www.elastic.co/assets/bltda40eebd7c7cae9a/facebook.svg?q=500") no-repeat;}
	
		.twitter{background:url("https://stag-static-www.elastic.co/assets/bltfd3b1511512f4632/twitter.svg?q=500") no-repeat;}
	
		.linkedin{background:url("https://stag-static-www.elastic.co/assets/blt6b4f6f8d6b96f814/linkedin.svg?q=500") no-repeat;}
	
		.xing{background:url("https://stag-static-www.elastic.co/assets/blta76b2ae2b2f10a98/xing.svg?q=500") no-repeat;}
	
		.youtube{background:url("https://stag-static-www.elastic.co/assets/blt5761648c9581fb53/youtube.svg?q=500") no-repeat;}
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>


  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";	
</script>
<script src="https://stag-static-www.elastic.co/static/js/jquery.autocomplete.js?q=500"></script>
<script src="https://stag-static-www.elastic.co/static/js/script.js?q=500"></script>


   	

   	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        
